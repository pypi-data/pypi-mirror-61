
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Develop support modules with sumo &#8212; Support Module Manager 3.7.1 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Example for sumo build try" href="example-sumo-build-try.html" />
    <link rel="prev" title="Using sumo in your application" href="app-usage.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="example-sumo-build-try.html" title="Example for sumo build try"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="app-usage.html" title="Using sumo in your application"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Support Module Manager 3.7.1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="develop-support-modules-with-sumo">
<h1>Develop support modules with sumo<a class="headerlink" href="#develop-support-modules-with-sumo" title="Permalink to this headline">¶</a></h1>
<p>sumo makes developing support modules easier. In this example we want to apply
changes in an existing support module, here “ALARM:R3-8”.</p>
<p>For our development we want to create a “sandbox” directory where we change and
compile the new support module. There are two ways to do this:</p>
<dl class="docutils">
<dt>standalone:</dt>
<dd>We use a local copy of the dependency database and build all support modules
in a local directory.</dd>
<dt>local:</dt>
<dd>We use a local copy of the dependency database, build all support modules in
a local directory but use existing compiled support modules from a global
build directory.</dd>
</dl>
<p>For both cases sumo create a configuration file “sumo.config” that contains all
needed settings and create the sandbox directory if it does not yet exist.</p>
<p>In the following example we create a sandbox in “local” mode.</p>
<div class="section" id="create-the-sandbox">
<h2>Create the sandbox<a class="headerlink" href="#create-the-sandbox" title="Permalink to this headline">¶</a></h2>
<p>Decide what the name of the sandbox should be, here we use “sandbox” and enter
this command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sumo</span> <span class="n">config</span> <span class="n">local</span> <span class="n">sandbox</span>
</pre></div>
</div>
</div>
<div class="section" id="create-a-head-version-of-a-module">
<h2>Create a “HEAD” version of a module<a class="headerlink" href="#create-a-head-version-of-a-module" title="Permalink to this headline">¶</a></h2>
<p>We now create a new entry in our local dependency database for the test version
of module “ALARM”. Our version control system is darcs in this case, this could
also be “hg”, “git”, “svn” or “cvs”. We have to use “darcs .” in this case in
order to create an entry in the dependency database that uses to tag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sumo</span> <span class="n">db</span> <span class="n">cloneversion</span> <span class="n">ALARM</span> <span class="n">R3</span><span class="o">-</span><span class="mi">8</span> <span class="n">HEAD</span> <span class="n">darcs</span> <span class="o">.</span>
</pre></div>
</div>
<p>Answer ‘y’ when the program asks if the changes are correct.</p>
</div>
<div class="section" id="build-the-module-for-the-first-time">
<h2>Build the module for the first time<a class="headerlink" href="#build-the-module-for-the-first-time" title="Permalink to this headline">¶</a></h2>
<p>Note: If you have an application at hand that is used to test the support
module it is easier to continue at <a class="reference internal" href="#test-in-an-application">Test in an application</a>. How you change
and compile the support is described at <a class="reference internal" href="#change-and-recompile">Change and recompile</a>.</p>
<p>We first have to see which other modules are needed by “ALARM”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sumo</span> <span class="n">build</span> <span class="k">try</span> <span class="n">ALARM</span><span class="p">:</span><span class="n">HEAD</span> <span class="o">--</span><span class="n">detail</span> <span class="mi">1</span>
</pre></div>
</div>
<p>This produces the following output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Possible</span> <span class="n">versions</span> <span class="k">for</span> <span class="n">unspecified</span><span class="o">/</span><span class="n">missing</span> <span class="n">modules</span><span class="p">:</span>

<span class="n">BASE</span>                <span class="n">R3</span><span class="o">-</span><span class="mi">14</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="mi">1</span> <span class="n">R3</span><span class="o">-</span><span class="mi">14</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span> <span class="n">R3</span><span class="o">-</span><span class="mi">14</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">aragon2</span>
                    <span class="n">R3</span><span class="o">-</span><span class="mi">14</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">aragon3</span> <span class="n">R3</span><span class="o">-</span><span class="mi">14</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">aragon4</span>
                    <span class="n">R3</span><span class="o">-</span><span class="mi">14</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">aragon5</span> <span class="n">R3</span><span class="o">-</span><span class="mi">14</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">aragon6</span>
                    <span class="n">R3</span><span class="o">-</span><span class="mi">14</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="mi">4</span> <span class="n">R3</span><span class="o">-</span><span class="mi">14</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="mi">5</span> <span class="n">R3</span><span class="o">-</span><span class="mi">14</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="mi">6</span>
                    <span class="n">R3</span><span class="o">-</span><span class="mi">14</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="mi">7</span> <span class="n">R3</span><span class="o">-</span><span class="mi">14</span><span class="o">-</span><span class="mi">8</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="mi">0</span> <span class="n">R3</span><span class="o">-</span><span class="mi">14</span><span class="o">-</span><span class="mi">8</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span>
<span class="n">BSPDEP_TIMER</span>        <span class="n">R4</span><span class="o">-</span><span class="mi">0</span> <span class="n">R5</span><span class="o">-</span><span class="mi">0</span> <span class="n">R5</span><span class="o">-</span><span class="mi">1</span> <span class="n">R6</span><span class="o">-</span><span class="mi">2</span>
<span class="n">MISC_DBC</span>            <span class="n">R3</span><span class="o">-</span><span class="mi">0</span>

<span class="n">Not</span> <span class="nb">all</span> <span class="n">dependencies</span> <span class="n">were</span> <span class="n">included</span> <span class="ow">in</span> <span class="n">module</span> <span class="n">specifications</span><span class="p">,</span> <span class="n">these</span> <span class="n">modules</span>
<span class="n">have</span> <span class="n">to</span> <span class="n">be</span> <span class="n">added</span><span class="p">:</span>
    <span class="n">BASE</span>
    <span class="n">BSPDEP_TIMER</span>
    <span class="n">MISC_DBC</span>

<span class="n">Command</span> <span class="s1">&#39;new&#39;</span> <span class="n">would</span> <span class="n">create</span> <span class="n">build</span> <span class="k">with</span> <span class="n">tag</span> <span class="s1">&#39;local-BL-001&#39;</span>

<span class="n">Your</span> <span class="n">module</span> <span class="n">specifications</span> <span class="n">are</span> <span class="n">still</span> <span class="n">incomplete</span><span class="p">,</span> <span class="n">command</span> <span class="s1">&#39;new&#39;</span> <span class="n">can</span> <span class="ow">not</span>
<span class="n">be</span> <span class="n">used</span> <span class="k">with</span> <span class="n">these</span><span class="o">.</span>
</pre></div>
</div>
<p>We specify the missing modules directly on the command line and create a new
build with the “HEAD” version of “ALARM”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sumo</span> <span class="n">build</span> <span class="n">new</span> <span class="n">ALARM</span><span class="p">:</span><span class="n">HEAD</span> <span class="n">BASE</span><span class="p">:</span><span class="n">R3</span><span class="o">-</span><span class="mi">14</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">aragon6</span> <span class="n">BSPDEP_TIMER</span><span class="p">:</span><span class="n">R6</span><span class="o">-</span><span class="mi">2</span> <span class="n">MISC_DBC</span><span class="p">:</span><span class="n">R3</span><span class="o">-</span><span class="mi">0</span>
</pre></div>
</div>
<p>We see the name of the new created build with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sumo</span> <span class="n">build</span> <span class="nb">list</span> <span class="o">|</span> <span class="n">grep</span> <span class="n">local</span><span class="o">-</span>
</pre></div>
</div>
</div>
<div class="section" id="change-and-recompile">
<h2>Change and recompile<a class="headerlink" href="#change-and-recompile" title="Permalink to this headline">¶</a></h2>
<p>We can now apply changes directly in directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sandbox</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">ALARM</span><span class="o">/</span><span class="n">HEAD</span><span class="o">+</span><span class="n">local</span><span class="o">-</span><span class="n">BL</span><span class="o">-</span><span class="mi">001</span>
</pre></div>
</div>
<p>We recompile the module and it’s dependencies with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sumo</span> <span class="n">build</span> <span class="n">remake</span> <span class="n">local</span><span class="o">-</span><span class="n">BL</span><span class="o">-</span><span class="mi">001</span>
</pre></div>
</div>
</div>
<div class="section" id="test-in-an-application">
<h2>Test in an application<a class="headerlink" href="#test-in-an-application" title="Permalink to this headline">¶</a></h2>
<p>In our application directory we first have to set up usage of the sumo sandbox:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sumo</span> <span class="n">config</span> <span class="n">local</span> <span class="n">sandbox</span>
</pre></div>
</div>
<p>When asked “Directory ‘sandbox’ already exists, use it ?” answer “y”.</p>
<p>In order to test our support change the definition of “ALARM” in file
“configure/MODULES” to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ALARM</span><span class="p">:</span><span class="n">HEAD</span>
</pre></div>
</div>
<p>Then use the new support with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sumo</span> <span class="n">build</span> <span class="n">use</span>
</pre></div>
</div>
<p>then create the application:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">clean</span> <span class="o">&amp;&amp;</span> <span class="n">make</span>
</pre></div>
</div>
<p>You can now test the support in your application.</p>
</div>
<div class="section" id="commit-the-changes-and-define-a-tag">
<h2>Commit the changes and define a tag<a class="headerlink" href="#commit-the-changes-and-define-a-tag" title="Permalink to this headline">¶</a></h2>
<p>When the new version of the support is shown to work, we should first commit
all changes in our version control system. The new version should have tag
“R3-9” in this example.</p>
<p>Commands for darcs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">sandbox</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">ALARM</span><span class="o">/</span><span class="n">HEAD</span><span class="o">+</span><span class="n">local</span><span class="o">-</span><span class="n">BL</span><span class="o">-</span><span class="mi">001</span>
<span class="n">darcs</span> <span class="n">record</span>
<span class="n">darcs</span> <span class="n">tag</span> <span class="n">R3</span><span class="o">-</span><span class="mi">9</span>
<span class="n">darcs</span> <span class="n">push</span>
</pre></div>
</div>
<p>Commands for mercurial:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">sandbox</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">ALARM</span><span class="o">/</span><span class="n">HEAD</span><span class="o">+</span><span class="n">local</span><span class="o">-</span><span class="n">BL</span><span class="o">-</span><span class="mi">001</span>
<span class="n">hg</span> <span class="n">commit</span>
<span class="n">hg</span> <span class="n">tag</span> <span class="n">R3</span><span class="o">-</span><span class="mi">9</span>
<span class="n">hg</span> <span class="n">push</span>
</pre></div>
</div>
<p>Commands for git:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">sandbox</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">ALARM</span><span class="o">/</span><span class="n">HEAD</span><span class="o">+</span><span class="n">local</span><span class="o">-</span><span class="n">BL</span><span class="o">-</span><span class="mi">001</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">a</span>
<span class="n">git</span> <span class="n">tag</span> <span class="n">R3</span><span class="o">-</span><span class="mi">9</span>
<span class="n">git</span> <span class="n">push</span>
</pre></div>
</div>
<p>Commands for subversion:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">sandbox</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">ALARM</span><span class="o">/</span><span class="n">HEAD</span><span class="o">+</span><span class="n">local</span><span class="o">-</span><span class="n">BL</span><span class="o">-</span><span class="mi">001</span>
<span class="n">svn</span> <span class="n">commit</span>
<span class="n">svn</span> <span class="n">tag</span> <span class="n">R3</span><span class="o">-</span><span class="mi">9</span>
</pre></div>
</div>
<p>Commands for cvs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">sandbox</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">ALARM</span><span class="o">/</span><span class="n">HEAD</span><span class="o">+</span><span class="n">local</span><span class="o">-</span><span class="n">BL</span><span class="o">-</span><span class="mi">001</span>
<span class="n">cvs</span> <span class="n">commit</span>
<span class="n">cvs</span> <span class="n">tag</span> <span class="n">R3</span><span class="o">-</span><span class="mi">9</span>
</pre></div>
</div>
</div>
<div class="section" id="add-the-new-support-to-the-dependency-database">
<h2>Add the new support to the dependency database<a class="headerlink" href="#add-the-new-support-to-the-dependency-database" title="Permalink to this headline">¶</a></h2>
<p>Finally we have to add the new version of the support module to the dependency
database.</p>
<p>We must ensure that we do not use the sandbox this time but the global sumo
database. This means that sumo must not load the file “sumo.config” that was
created by the command “sumo config local”. Since sumo always loads
“sumo.config” from current working directory, we change to a different
directory before we issue the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">sandbox</span><span class="o">/</span><span class="n">database</span>
<span class="n">sumo</span> <span class="n">db</span> <span class="n">cloneversion</span> <span class="n">ALARM</span> <span class="n">R3</span><span class="o">-</span><span class="mi">8</span> <span class="n">R3</span><span class="o">-</span><span class="mi">9</span>
</pre></div>
</div>
<p>We can now use the new version of the support in our applications.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="sumo-install.html">Installing Sumo</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="modulespecs.html">Module Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration-files.html">Configuration Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference-sumo-scan.html">sumo-scan</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference-sumo.html">sumo</a></li>
<li class="toctree-l1"><a class="reference internal" href="app-usage.html">Using sumo in your application</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Develop support modules with sumo</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#create-the-sandbox">Create the sandbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-a-head-version-of-a-module">Create a “HEAD” version of a module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#build-the-module-for-the-first-time">Build the module for the first time</a></li>
<li class="toctree-l2"><a class="reference internal" href="#change-and-recompile">Change and recompile</a></li>
<li class="toctree-l2"><a class="reference internal" href="#test-in-an-application">Test in an application</a></li>
<li class="toctree-l2"><a class="reference internal" href="#commit-the-changes-and-define-a-tag">Commit the changes and define a tag</a></li>
<li class="toctree-l2"><a class="reference internal" href="#add-the-new-support-to-the-dependency-database">Add the new support to the dependency database</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="example-sumo-build-try.html">Example for sumo build try</a></li>
<li class="toctree-l1"><a class="reference internal" href="migration-examples.html">Migrating supports and applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">How to Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="app-usage.html"
                        title="previous chapter">Using sumo in your application</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="example-sumo-build-try.html"
                        title="next chapter">Example for sumo build try</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/dev-usage.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="example-sumo-build-try.html" title="Example for sumo build try"
             >next</a> |</li>
        <li class="right" >
          <a href="app-usage.html" title="Using sumo in your application"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Support Module Manager 3.7.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Helmholtz-Zentrum Berlin GmbH.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.4.
    </div>
  </body>
</html>