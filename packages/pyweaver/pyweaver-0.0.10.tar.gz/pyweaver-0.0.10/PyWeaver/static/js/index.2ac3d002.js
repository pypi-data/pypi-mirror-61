(function(e){function t(t){for(var a,r,s=t[0],c=t[1],l=t[2],_=0,u=[];_<s.length;_++)r=s[_],i[r]&&u.push(i[r][0]),i[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(u.length)u.shift()();return n.push.apply(n,l||[]),o()}function o(){for(var e,t=0;t<n.length;t++){for(var o=n[t],a=!0,s=1;s<o.length;s++){var c=o[s];0!==i[c]&&(a=!1)}a&&(n.splice(t--,1),e=r(r.s=o[0]))}return e}var a={},i={index:0},n=[];function r(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=a,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(o,a,function(t){return e[t]}.bind(null,a));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var d=c;n.push([0,"chunk-vendors","chunk-common"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"034f":function(e,t,o){"use strict";var a=o("1356"),i=o.n(a);i.a},"0c10":function(e,t,o){e.exports=o.p+"img/success.0295b738.png"},1356:function(e,t,o){},"2a06":function(e,t,o){e.exports=o.p+"img/warning.a999d80d.png"},"56d7":function(e,t,o){"use strict";o.r(t);o("cadf"),o("551c"),o("f751"),o("097d");var a=o("a026"),i=(o("402c"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-app",[o("v-toolbar",{attrs:{app:"",dark:"",fixed:"","clipped-left":"",flat:""}},[o("v-toolbar-title",{staticClass:"headline text-uppercase pr-5"},[o("span",[e._v("Py")]),o("span",{staticClass:"font-weight-light"},[e._v("Weaver")])]),o("v-divider",{attrs:{vertical:""}}),o("v-item-group",{staticClass:"pa-2",attrs:{dense:""}},[o("v-btn",{attrs:{flat:"",small:"",icon:""},on:{click:e.OpenFile}},[o("v-icon",[e._v("folder_open")])],1),o("v-btn",{attrs:{flat:"",small:"",icon:""},on:{click:e.SaveModel}},[o("v-icon",[e._v("cloud_download")])],1)],1),o("v-divider",{attrs:{vertical:""}}),o("v-item-group",{attrs:{dense:""}},[o("v-btn",{attrs:{flat:"",icon:"",small:""},on:{click:function(t){return e.runServer()}}},[o("v-icon",{attrs:{small:""}},[e._v("play_arrow")])],1),o("v-btn",{attrs:{flat:"",icon:"",small:""}},[o("v-icon",{attrs:{small:""}},[e._v("pause")])],1),o("v-btn",{attrs:{flat:"",icon:"",small:""},on:{click:e.resetServer}},[o("v-icon",{attrs:{small:""}},[e._v("refresh")])],1)],1),o("v-spacer"),e.connected?o("v-chip",{attrs:{color:"green","text-color":"white"}},[e._v("Connected")]):e._e(),e.connected?e._e():o("v-chip",{attrs:{color:"red","text-color":"white"}},[e._v("Disconnected")])],1),o("input",{attrs:{type:"file",id:"fileInput",hidden:""},on:{change:function(t){return e.OpenModel(t)}}}),o("SideBar"),o("v-content",{staticStyle:{overflow:"hidden"}},[o("v-toolbar",{staticClass:"grey darken-2",attrs:{dark:"",dense:"",flat:""}},[e._v("          \n                    \n        Outline        \n        "),o("v-item-group",[o("v-btn",{attrs:{flat:"",icon:""},on:{click:function(t){return e.SetDashed(!1)}}},[o("v-icon",[e._v("remove")])],1),o("v-btn",{attrs:{flat:"",icon:""},on:{click:function(t){return e.SetDashed(!0)}}},[o("v-icon",[e._v("more_horiz")])],1)],1),o("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[o("v-btn",e._g({attrs:{dark:"",icon:""}},a),[o("v-icon",[e._v("format_color_fill")])],1)]}}])},[o("v-list",{attrs:{dark:""}},e._l(e.colors,function(t,a){return o("v-list-tile",{key:a,on:{click:function(o){return e.SetColor(t.code)}}},[o("v-list-tile-title",[o("v-icon",{attrs:{color:t.code}},[e._v("format_color_fill")])],1)],1)}),1)],1),o("v-overflow-btn",{staticStyle:{width:"50px"},attrs:{items:["1","2","3","5","8"],label:"Stroke size","hide-details":"",overflow:""},on:{change:function(t){return e.SetStrokeSize()}},model:{value:e.stroke_size,callback:function(t){e.stroke_size=t},expression:"stroke_size"}}),o("v-divider",{attrs:{vertical:""}}),o("v-autocomplete",{ref:"search_bar",staticClass:"caption",attrs:{small:"",placeholder:"Node Library Search...","prepend-inner-icon":"library_books",items:e.calc_list,filter:e.nodeLibraryFilter,"return-object":"","auto-select-first":"","menu-props":{value:e.librarySearchMenu,openOnClick:!0,dark:!0,closeOnContentClick:!0,closeOnClick:!0}},on:{change:function(t){return e.librarySearchSelection(e.library_search_val)},blur:function(t){e.librarySearchMenu=!1},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.loseLibrarySearchFocus()}},scopedSlots:e._u([{key:"selection",fn:function(t){return[e._v("\n              "+e._s(t.item.name)+"\n          ")]}},{key:"item",fn:function(t){return[[o("v-list-tile-avatar",[o("img",{attrs:{src:t.item.avatar}})]),o("v-list-tile-content",[o("v-list-tile-title",{domProps:{innerHTML:e._s(t.item.name)}}),o("v-list-tile-sub-title",{domProps:{innerHTML:e._s(t.item.description)}})],1)]]}}]),model:{value:e.library_search_val,callback:function(t){e.library_search_val=t},expression:"library_search_val"}}),o("v-btn",{attrs:{icon:""},on:{click:function(t){return e.$socket.emit("refresh_library")}}},[o("v-icon",[e._v("\n            refresh\n          ")])],1)],1),o("v-toolbar",{attrs:{dark:"",dense:""}}),o("v-card",{attrs:{flat:"",height:"100%"}},[o("div",{attrs:{id:"outlineContainer"}}),o("div",{class:e.canvas_color,attrs:{id:"canvas"}})])],1),o("CodeEditor"),o("RefactorFunctionalize"),o("LibrarySaveDialog"),o("v-footer",{staticClass:"pa-3",attrs:{app:"",dark:""}},[o("v-spacer"),o("div",[e._v("© "+e._s((new Date).getFullYear()))])],1)],1)}),n=[],r=(o("7f7f"),o("6762"),o("2fdb"),o("d225")),s=o("b0b4"),c=new a["a"],l=o("0c10"),d=o.n(l),_=o("bb5a"),u=o.n(_),v=o("7e8b"),h=o.n(v),f=o("2a06"),p=o.n(f),m=function(){function e(t,o,a){Object(r["a"])(this,e),this.container=t,this.graph={},this.store=a,this.codeNode={},this.outline_container=o}return Object(s["a"])(e,[{key:"GetModelXML",value:function(){var e=this.graph,t=new mxCodec,o=t.encode(e.getModel()),a=mxUtils.getPrettyXml(o);return a}},{key:"LoadModel",value:function(e){var t=this.graph,o=e,a=mxUtils.parseXml(o),i=a.documentElement,n=new mxCodec(i.ownerDocument);n.decode(i,t.getModel())}},{key:"mount",value:function(){var e=this;mxEvent.disableContextMenu(this.container),mxGraph.prototype.isCellMovable=function(e){if(this.lastEvent.altKey)return!1;var t=this.view.getState(e),o=null!=t?t.style:this.getCellStyle(e);return this.isCellsMovable()&&!this.isCellLocked(e)&&0!=o[mxConstants.STYLE_MOVABLE]},mxGraphHandler.prototype.guidesEnabled=!0,mxEdgeHandler.prototype.snapToTerminals=!0;var t=new mxGraph(this.container);this.graph=t,t.store=this.store;new mxOutline(t,this.outline_container);t.setAllowDanglingEdges(!1),t.setConnectable(!0),t.setMultigraph(!0),t.isCellEditable=function(e){return e.edge};var o=this.createPopupMenu,a=this;t.popupMenuHandler.factoryMethod=function(e,i,n){return o(a,t,e,i,n)},t.isLabelMovable=function(e){return!1},t.isHtmlLabel=function(e){return!e.edge},t.autoSizeCells=!0,t.foldingEnabled=!1,t.setPanning(!0),t.scrollTileSize=new mxRectangle(0,0,400,400),this.calcDefaultStyles();var i=t.getPreferredSizeForCell;t.getPreferredSizeForCell=function(e){var t=i.apply(this,arguments);if(e.edge)return t;var o=document.getElementById("node_"+e.id);return o?(t.width=o.offsetWidth+50,t.height=o.offsetHeight+50):console.log("can't find div:node_"+e.id),t},mxRubberband.prototype.isForceRubberbandEvent=function(e){return!1},new mxRubberband(t),t.isPort=function(e){this.getCellGeometry(e);return!1},mxEvent.addMouseWheelListener(mxUtils.bind(this,function(e,o){"svg"==e.target.localName&&(1==o?t.zoomIn():t.zoomOut())}));var n=new mxKeyHandler(t);n.bindKey(46,function(e){t.isEnabled()&&t.removeCells()}),t.connectionHandler.addListener(mxEvent.CONNECT,function(t,o){var a=o.getProperty("cell"),i={source_id:a.source.parent.id,target_id:a.target.parent.id,source_var:a.source.value,target_var:a.target.value};e.store.dispatch("add_connection",i)}),t.addListener(mxEvent.DOUBLE_CLICK,function(t,o){var a=o.getProperty("cell"),i=o.getProperty("event");if(null!=a&&"rect"==i.target.localName&&a.isNode){var n=e.store.state.code_nodes[a.id];e.store.dispatch("open_code_editor",n)}}),t.labelChanged=function(e,t,o){if(e.edge){e.value=t;var a={source_id:e.source.parent.id,source_var:e.source.value,target_id:e.target.parent.id,target_var:e.target.value,name:t};this.getView().clear(e,!1,!1),this.getView().validate(),this.cellSizeUpdated(e,!0),this.store.dispatch("rename_connection",a)}},t.addListener(mxEvent.MOUSE_MOVE,function(e,o){t.isMouseDown}),t.addListener(mxEvent.CELLS_REMOVED,function(t,o){for(var a=o.properties.cells,i=0;i<a.length;i++){var n=a[i];if(n.edge){var r={source_id:n.source.parent.id,source_var:n.source.value,target_id:n.target.parent.id,target_var:n.target.value};e.store.dispatch("remove_connection",r)}}for(i=0;i<a.length;i++){n=a[i];n.isNode&&e.store.dispatch("delete_node",n.id)}})}},{key:"addResults",value:function(e){var t=this.graph.getDefaultParent();this.graph.getModel().beginUpdate();try{t.results=JSON.stringify(e)}finally{this.graph.getModel().endUpdate()}}},{key:"addScopes",value:function(e){var t=this.graph.getDefaultParent();this.graph.getModel().beginUpdate();try{t.scopes=JSON.stringify(e)}finally{this.graph.getModel().endUpdate()}}},{key:"addNode",value:function(e){var t=null,o=this.graph.getDefaultParent();this.graph.getModel().beginUpdate();try{var a=e.outputs,i=e.inputs,n=e.id,r=30*Math.max(a.length,i.length)+40;e.height||(e.height=r);t=this.graph.insertVertex(o,n,"",e.x,e.y,e.width,e.height,"verticalAlign=middle");t.value="<div style='border: 1px solid;' id='node_"+t.id+"' class='node_display'></div>",t.display_act_code="",t.setConnectable(!1),t.isNode=!0}finally{this.graph.getModel().endUpdate()}return this.changePorts(t,a,1,"output"),this.changePorts(t,i,0,"input"),t}},{key:"addEdge",value:function(e){for(var t=this.graph,o=t.getDefaultParent(),a=t.getModel(),i=a.cells[e["source_id"]],n=null,r=0;r<i.children.length;r++){var s=i.children[r];if(s.value==e["source_var"]){n=s;break}}var c=a.cells[e["target_id"]],l=null;for(r=0;r<c.children.length;r++){var d=c.children[r];if(d.value==e["target_var"]){l=d;break}}a.beginUpdate();try{t.insertEdge(o,null,"",n,l)}finally{a.endUpdate()}}},{key:"changePorts",value:function(e,t,o,a){var i=this.graph.getModel(),n=[],r=[],s="",c=!0;0==o?s="labelPosition=left;verticalLabelPosition=top;align=right;deletable=0":(s="labelPosition=right;verticalLabelPosition=top;align=left;deletable=0",c=!1),this.graph.getModel().beginUpdate();try{if(e.children)for(var l=0;l<e.children.length;l++){var d=e.children[l],_=d.value,u=d.tag;t.includes(_)||u!=a?u==a&&(r.push(d),n.push(_)):(this.graph.removeCells(i.getEdges(d),!1),this.graph.removeCells([d],!1),l-=1)}for(l=0;l<t.length;l++){_=t[l];if(n.includes(_)){v=r[l];v.geometry.y=1/(t.length+1)*(l+1)}else{var v=this.graph.insertVertex(e,null,_,o,1/(t.length+1)*(l+1),10,10,s,!0);v.geometry.offset=new mxPoint(-5,-5),v.setConnectable(!0),v.tag=a,v.isInput=c,v.isConnector=!0}}this.graph.getView().validate()}finally{this.graph.getModel().endUpdate()}}},{key:"updateCell",value:function(e){this.graph.getView().clear(e,!1,!1),this.graph.getView().validate(),this.graph.cellSizeUpdated(e,!0)}},{key:"updateCellSize",value:function(e){this.graph.cellSizeUpdated(e,!0)}},{key:"setCellColor",value:function(e){for(var t=this.graph.selectionModel.cells,o=0;o<t.length;o++){var a=t[o],i=a.getStyle(),n=mxUtils.setStyle(i,mxConstants.STYLE_STROKECOLOR,e);this.graph.setCellStyle(n,[a])}}},{key:"setCellStroke",value:function(e){for(var t=this.graph.selectionModel.cells,o=0;o<t.length;o++){var a=t[o],i=a.getStyle(),n=mxUtils.setStyle(i,mxConstants.STYLE_STROKEWIDTH,e);this.graph.setCellStyle(n,[a])}}},{key:"setDashed",value:function(e,t){for(var o=0,a=0;a<e.length;a++){var i=e[a],n=i.getStyle();t&&(o=1);var r=mxUtils.setStyle(n,mxConstants.STYLE_DASHED,o);this.graph.setCellStyle(r,[i])}}},{key:"setSelectionDashed",value:function(e){var t=this.graph.selectionModel.cells;this.setDashed(t,e)}},{key:"calcDefaultStyles",value:function(){var e=this.graph;if(this.store.state.config.dark_mode){var t=e.getStylesheet().getDefaultVertexStyle();t["fillColor"]="#212121",t["strokeColor"]="#FFFFFF",t["fontColor"]="#FFFFFF",t["fontStyle"]="1",t=e.getStylesheet().getDefaultEdgeStyle(),t["strokeColor"]="#FFFFFF",t["fontColor"]="#FFFFFF",t["fontStyle"]="0",t["fontStyle"]="0",t["startSize"]="8",t["endSize"]="8",t[mxConstants.STYLE_ROUNDED]=!0,t[mxConstants.STYLE_EDGE]=mxEdgeStyle.OrthConnector,t[mxConstants.STYLE_STROKEWIDTH]="1",t[mxConstants.STYLE_LABEL_BACKGROUNDCOLOR]="#212121"}else{t=e.getStylesheet().getDefaultVertexStyle();t["fillColor"]="#FFFFFF",t["strokeColor"]="#000000",t["fontColor"]="#000000",t["fontStyle"]="1",t=e.getStylesheet().getDefaultEdgeStyle(),t["strokeColor"]="#000000",t["fontColor"]="#000000",t["fontStyle"]="0",t["fontStyle"]="0",t["startSize"]="8",t["endSize"]="8",t[mxConstants.STYLE_ROUNDED]=!0,t[mxConstants.STYLE_EDGE]=mxEdgeStyle.OrthConnector,t[mxConstants.STYLE_STROKEWIDTH]="1",t[mxConstants.STYLE_LABEL_BACKGROUNDCOLOR]="#FFFFFF"}}},{key:"updateSyles",value:function(){this.calcDefaultStyles()}},{key:"setOverlay",value:function(e,t){var o=null,a="";"ok"==t?(a="Calculation succeeded",o=new mxImage(d.a,16,16)):"error"==t?(a="Error",o=new mxImage(u.a,16,16)):"warning"==t?(a="Not enough inputs",o=new mxImage(p.a,16,16)):(a="Executing...",o=new mxImage(h.a,16,16));var i=new mxCellOverlay(o,a);this.graph.addCellOverlay(e,i)}},{key:"removeOverlay",value:function(e){this.graph.removeCellOverlays(e)}},{key:"createPopupMenu",value:function(e,t,o,a,i){null!=a&&(a.edge||(a.isConnector?a.isInput||(o.addItem("Pass by value","editors/images/image.gif",function(){var o={};o.id=a.parent.id,o.var_name=a.value,o.is_val=!0,e.setDashed([a],0),t.store.dispatch("set_output_type",o)}),o.addItem("Pass by reference","editors/images/image.gif",function(){var o={};o.id=a.parent.id,o.var_name=a.value,o.is_val=!1,e.setDashed([a],1),t.store.dispatch("set_output_type",o)})):(o.addItem("Display on new window","editors/images/image.gif",function(){window.open("http://localhost:5000/node_viewer.html?node_id="+a.id,"name","location=no,scrollbars=yes,status=no,toolbar=yes,resizable=no,top=0,left=0,width=400,height=400")}),o.addItem("Refactor to function","editors/images/image.gif",function(){t.store.dispatch("open_refactor_dialog",a.id)}))))}}]),e}(),g=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-dialog",{attrs:{width:"800",persistent:""},on:{keydown:e.codeDialogShortcuts},model:{value:e.code_dialog,callback:function(t){e.code_dialog=t},expression:"code_dialog"}},[o("v-card",[o("v-toolbar",{attrs:{dark:"",color:"gray"}},[o("v-toolbar-title",[e._v("Editor")]),o("v-btn",{attrs:{icon:""},on:{click:e.openSaveDialog}},[o("v-icon",[e._v("save")])],1),o("v-spacer"),o("v-toolbar-items",[o("v-btn",{attrs:{icon:"",dark:""},on:{click:e.closeDialog}},[o("v-icon",[e._v("close")])],1)],1)],1),o("v-card-text",[o("v-tabs",{attrs:{dark:""},model:{value:e.current_mode,callback:function(t){e.current_mode=t},expression:"current_mode"}},[o("v-tab",{key:"code",on:{click:function(t){return e.show_code()}}},[e._v("Code")]),o("v-tab",{key:"ui",on:{click:function(t){return e.show_display()}}},[e._v("Display")]),o("v-tab",{key:"ui_script",on:{click:function(t){return e.show_display_script()}}},[e._v("Display Actions")])],1),o("v-spacer"),o("codemirror",{ref:"code_editor",attrs:{options:e.cmOptions},model:{value:e.editor_code,callback:function(t){e.editor_code=t},expression:"editor_code"}}),o("v-card",{key:e.bug_key,attrs:{dark:""}},[e._v(e._s(e.error_text))])],1),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{color:"green",flat:"",dark:""},on:{click:e.saveCode}},[e._v("Update")])],1)],1)],1)},y=[],b=(o("a7be"),o("db91"),o("8c2e"),o("d69f"),o("f9d4"),o("8f94")),k={components:{codemirror:b["codemirror"]},mounted:function(){var e=this;window.setInterval(function(){e.updateEditors()},250)},data:function(){return{bug_key:-1,cmOptions:{tabSize:4,indentUnit:4,mode:"python",lineNumbers:!0,viewportMargin:1/0,line:!0,theme:"base16-dark",autoRefresh:!0},has_error:!1,current_mode:0,editor_code:""}},methods:{bugHighlight:function(){if(this.bug_key=-1*this.bug_key,-1!=this.error_line){var e=this.error_line-1;this.$refs.code_editor.cminstance.addLineClass(e,"background","line-error"),this.$refs.code_editor.codemirror.refresh()}},backup_code:function(){0==this.current_mode?this.code=this.editor_code:1==this.current_mode?this.display_code=this.editor_code:2==this.current_mode&&(this.display_act_code=this.editor_code)},show_code:function(){this.backup_code(),this.setEditorMode("python"),this.editor_code=this.code},show_display:function(){this.backup_code(),this.setEditorMode("htmlmixed"),this.editor_code=this.display_code},show_display_script:function(){this.backup_code(),this.setEditorMode("javascript"),this.editor_code=this.display_act_code},setEditorMode:function(e){this.$refs.code_editor.codemirror.setOption("mode",e)},bugUnHighlight:function(){if(-1!=this.error_line){var e=this.error_line-1;this.$refs.code_editor.cminstance.removeLineClass(e,"background","line-error")}},updateEditors:function(){this.code_dialog&&this.$refs.code_editor.codemirror&&this.$refs.code_editor.codemirror.refresh()},closeDialog:function(){this.bugUnHighlight(),this.code_dialog=!1},openSaveDialog:function(){this.$store.commit("set_dialog_open",!0)},saveCode:function(){this.backup_code(),this.$store.dispatch("save_node_code",{code:this.code,display_code:this.display_code,display_act_code:this.display_act_code}),this.closeDialog()},codeDialogShortcuts:function(e){this.code_dialog&&(13===e.keyCode&&e.shiftKey?this.saveCode():27===e.keyCode&&this.closeDialog())}},computed:{error_line:{get:function(){var e=this.$store.state.selected_node.id;return e&&this.$store.state.code_error_dict[e]?this.$store.state.code_error_dict[e].line:-1}},error_text:{get:function(){var e=this.$store.state.selected_node.id;return e&&this.$store.state.code_error_dict[e]?this.$store.state.code_error_dict[e].error:"Error text"}},code:{get:function(){return this.$store.state.code},set:function(e){this.$store.commit("set_code",e)}},display_code:{get:function(){return this.$store.state.display_code},set:function(e){this.$store.commit("set_display_code",e)}},display_act_code:{get:function(){return this.$store.state.display_act_code},set:function(e){this.$store.commit("set_display_act_code",e)}},code_dialog:{get:function(){return this.$store.state.open_code_editor},set:function(e){this.$store.commit("open_editor",e)}}},watch:{code_dialog:function(e,t){t||(this.setEditorMode("python"),this.current_mode=0,this.editor_code=this.code),e&&this.bugHighlight()}}},w=k,x=(o("b68c"),o("2877")),C=o("6544"),S=o.n(C),D=o("8336"),$=o("b0af"),E=o("99d9"),V=o("169a"),T=o("132d"),O=o("9910"),M=o("71a3"),F=o("fe57"),L=o("71d9"),N=o("2a7f"),I=Object(x["a"])(w,g,y,!1,null,null,null),P=I.exports;S()(I,{VBtn:D["a"],VCard:$["a"],VCardActions:E["a"],VCardText:E["b"],VDialog:V["a"],VIcon:T["a"],VSpacer:O["a"],VTab:M["a"],VTabs:F["a"],VToolbar:L["a"],VToolbarItems:N["a"],VToolbarTitle:N["b"]});var A=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-dialog",{attrs:{width:"800",persistent:""},model:{value:e.code_dialog,callback:function(t){e.code_dialog=t},expression:"code_dialog"}},[o("v-card",[o("v-toolbar",{attrs:{dark:"",color:"gray"}},[o("v-toolbar-title",[e._v("Editor")]),o("v-spacer"),o("v-toolbar-items",[o("v-btn",{attrs:{icon:"",dark:""},on:{click:e.closeDialog}},[o("v-icon",[e._v("close")])],1)],1)],1),o("v-card-text",[o("v-select",{attrs:{items:e.refactor_func_dialog_vars,attach:"",chips:"",label:"Inner variables",multiple:""},model:{value:e.selected_vars,callback:function(t){e.selected_vars=t},expression:"selected_vars"}})],1),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{color:"green",flat:"",dark:""},on:{click:e.refactorCode}},[e._v("Refactor")])],1)],1)],1)},R=[],U={components:{},mounted:function(){},data:function(){return{selected_vars:[]}},methods:{closeDialog:function(){this.code_dialog=!1},refactorCode:function(){this.$store.dispatch("refactor_to_function",{node_id:"n_1",inner_vars:this.selected_vars}),this.closeDialog()}},computed:{refactor_func_dialog_vars:{get:function(){return this.$store.state.refactor_func_options}},refactor_node_id:{get:function(){return this.$store.state.refactor_node_id}},code_dialog:{get:function(){return this.$store.state.show_refactor_func_dialog},set:function(e){this.$store.commit("set_show_refactor_func_dialog",e)}}}},z=U,B=o("b56d"),j=Object(x["a"])(z,A,R,!1,null,null,null),Y=j.exports;S()(j,{VBtn:D["a"],VCard:$["a"],VCardActions:E["a"],VCardText:E["b"],VDialog:V["a"],VIcon:T["a"],VSelect:B["a"],VSpacer:O["a"],VToolbar:L["a"],VToolbarItems:N["a"],VToolbarTitle:N["b"]});var H=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-navigation-drawer",{attrs:{permanent:"",clipped:"",dark:"",app:"",width:"300","mini-variant":e.drawer_mini}},[o("v-list",[o("v-list-tile",[o("v-list-tile-content"),o("v-list-tile-action",{on:{click:e.toggleMiniDrawer}},[o("v-btn",{attrs:{icon:""}},[e.drawer_mini?o("v-icon",[e._v("keyboard_arrow_right")]):e._e(),e.drawer_mini?e._e():o("v-icon",[e._v("keyboard_arrow_left")])],1)],1)],1),o("v-list-tile",[o("v-list-tile-content",[o("br"),o("br"),o("v-text-field",{attrs:{label:"Document name"},model:{value:e.document_name,callback:function(t){e.document_name=t},expression:"document_name"}}),o("br")],1)],1),o("v-divider"),o("v-list-tile",{on:{click:e.addNode}},[o("v-list-tile-action",[o("v-btn",{staticClass:"text-lg-right",attrs:{icon:""}},[o("v-icon",[e._v("add")])],1)],1),o("v-list-tile-content",[e._v("ADD EMPTY NODE")])],1),o("v-divider"),o("v-list-tile",{on:{click:function(t){e.drawer_mini=!1}}},[o("v-list-tile-action",[o("v-btn",{staticClass:"text-lg-right",attrs:{icon:""}},[o("v-icon",[e._v("library_books")])],1)],1),o("v-list-tile-content",[e._v("Node Library")])],1),o("v-card",{directives:[{name:"show",rawName:"v-show",value:!e.drawer_mini,expression:"!drawer_mini"}],staticStyle:{padding:"20px","overflow-y":"scroll"},attrs:{height:"300px",flat:""}},[o("v-treeview",{ref:"tree",attrs:{items:e.items,"open-on-click":""},scopedSlots:e._u([{key:"prepend",fn:function(t){var a=t.item;return[a.children?o("v-icon",[e._v("folder")]):e._e(),a.children?e._e():o("v-icon",[e._v("insert_drive_file")])]}},{key:"label",fn:function(t){var a=t.item;return[o("span",{on:{dblclick:function(t){return e.addLibraryNode(a.lib_id)}}},[e._v(e._s(a.name))]),0==a.id?o("v-btn",{attrs:{icon:""},on:{click:e.refreshLibrary}},[o("v-icon",[e._v("refresh")])],1):e._e()]}}])})],1),o("v-divider"),o("v-list-tile",{on:{click:function(t){e.showOptionsDialog=!0}}},[o("v-list-tile-action",[o("v-btn",{staticClass:"text-lg-right",attrs:{icon:""},on:{click:function(t){e.showOptionsDialog=!0}}},[o("v-icon",[e._v("settings")])],1)],1),o("v-list-tile-content",[e._v("SETTINGS")])],1)],1),o("OptionsDialog",{on:{close:function(t){e.showOptionsDialog=!1}},model:{value:e.showOptionsDialog,callback:function(t){e.showOptionsDialog=t},expression:"showOptionsDialog"}})],1)},G=[],K=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-dialog",{attrs:{width:"800",persistent:""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[o("v-card",[o("v-toolbar",{attrs:{dark:"",color:"gray"}},[o("v-toolbar-title",[e._v("Options")]),o("v-spacer"),o("v-toolbar-items",[o("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){return e.$emit("close")}}},[o("v-icon",[e._v("close")])],1)],1)],1),o("v-card-text",[o("v-checkbox",{attrs:{label:"Automatically run flowsheet"},model:{value:e.autoRun,callback:function(t){e.autoRun=t},expression:"autoRun"}}),o("v-checkbox",{attrs:{label:"Automatically sync model"},model:{value:e.autoSync,callback:function(t){e.autoSync=t},expression:"autoSync"}}),o("v-checkbox",{attrs:{label:"Dark Mode (requires page reload)"},model:{value:e.darkMode,callback:function(t){e.darkMode=t},expression:"darkMode"}})],1)],1)],1)},J=[],q={props:["value"],data:function(){return{}},computed:{autoRun:{get:function(){return this.$store.state.config.auto_exec},set:function(e){this.$store.commit("set_auto_exec",e),this.$store.dispatch("save_config_file")}},autoSync:{get:function(){return this.$store.state.config.sync_model},set:function(e){this.$store.commit("set_auto_sync",e),this.$store.dispatch("save_config_file")}},darkMode:{get:function(){return this.$store.state.config.dark_mode},set:function(e){this.$store.dispatch("change_dark_mode",e),this.$store.dispatch("sync_model_with_server"),this.$store.dispatch("save_config_file")}}}},W=q,X=o("ac7c"),Q=Object(x["a"])(W,K,J,!1,null,null,null),Z=Q.exports;S()(Q,{VBtn:D["a"],VCard:$["a"],VCardText:E["b"],VCheckbox:X["a"],VDialog:V["a"],VIcon:T["a"],VSpacer:O["a"],VToolbar:L["a"],VToolbarItems:N["a"],VToolbarTitle:N["b"]});var ee={components:{OptionsDialog:Z},mounted:function(){},data:function(){return{drawer_mini:!0,showOptionsDialog:!1}},methods:{addNode:function(){this.$socket.emit("new_empty_node")},refreshLibrary:function(){this.$socket.emit("refresh_library")},resetServer:function(){this.$socket.emit("reset")},toggleMiniDrawer:function(){this.drawer_mini=!this.drawer_mini},addLibraryNode:function(e){this.$socket.emit("load_node",e)}},computed:{items:{get:function(){return this.$store.state.libraryTree}},document_name:{get:function(){return this.$store.state.document_name},set:function(e){this.$store.commit("set_document_name",e)}}}},te=ee,oe=o("ce7e"),ae=o("8860"),ie=o("ba95"),ne=o("40fe"),re=o("5d23"),se=o("f774"),ce=o("2677"),le=o("eb2a"),de=Object(x["a"])(te,H,G,!1,null,null,null),_e=de.exports;S()(de,{VBtn:D["a"],VCard:$["a"],VDivider:oe["a"],VIcon:T["a"],VList:ae["a"],VListTile:ie["a"],VListTileAction:ne["a"],VListTileContent:re["a"],VNavigationDrawer:se["a"],VTextField:ce["a"],VTreeview:le["a"]});var ue=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-dialog",{attrs:{width:"800",persistent:""},model:{value:e.save_dialog,callback:function(t){e.save_dialog=t},expression:"save_dialog"}},[o("v-card",[o("v-toolbar",{attrs:{dark:"",color:"gray"}},[o("v-toolbar-title",[e._v("Save to Library")]),o("v-spacer"),o("v-toolbar-items",[o("v-btn",{attrs:{icon:"",dark:""},on:{click:e.closeDialog}},[o("v-icon",[e._v("close")])],1)],1)],1),o("v-card-text",[o("v-container",{attrs:{"grid-list-md":""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs6:""}},[o("v-card",{staticStyle:{"overflow-y":"scroll",border:"2px solid grey","border-radius":"1px"},attrs:{height:"500px",flat:""}},[o("v-treeview",{ref:"tree",attrs:{items:e.libraryTree,activatable:"",active:e.selected_folder,"return-object":""},on:{"update:active":function(t){e.selected_folder=t}},scopedSlots:e._u([{key:"prepend",fn:function(t){var a=t.item;return[o("div",{on:{click:function(t){e.hover_tree_id=a.id}}},[a.children?o("v-icon",[e._v("folder")]):e._e(),a.children?e._e():o("v-icon",[e._v("insert_drive_file")])],1)]}},{key:"label",fn:function(t){var a=t.item;return[o("div",{on:{click:function(t){e.hover_tree_id=a.id}}},[e._e(),o("span",[e._v(e._s(a.name))]),e._v("\n                                                 \n                                                "),o("a",[a.id==e.hover_tree_id?o("v-icon",{on:{click:function(t){return e.openEditNameDialog(a)}}},[e._v("edit")]):e._e()],1),o("a",[a.id==e.hover_tree_id&&a.children?o("v-icon",{on:{click:function(t){return e.openNewFolderDialog(a)}}},[e._v("create_new_folder")]):e._e()],1),o("a",[a.id==e.hover_tree_id?o("v-icon",{on:{click:function(t){return e.openDeleteFolderDialog(a)}}},[e._v("delete_forever")]):e._e()],1)],1)]}}])})],1)],1),o("v-flex",{attrs:{xs6:""}},[o("v-card",{attrs:{flat:"",height:"500px"}},[o("v-text-field",{attrs:{label:"Node Template Name",rules:[e.rules.required],clearable:""},model:{value:e.save_name,callback:function(t){e.save_name=t},expression:"save_name"}}),o("v-textarea",{attrs:{label:"Node Description","no-resize":"",outline:""},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),o("v-textarea",{attrs:{label:"Search keywords",hint:"Comma separated keywords","no-resize":"",outline:"","persistent-hint":""},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}})],1)],1)],1)],1)],1),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{color:"blue",flat:"",dark:""},on:{click:e.saveNode}},[e._v("Save")])],1)],1),o("v-dialog",{attrs:{width:"500px"},model:{value:e.add_folder_dialog,callback:function(t){e.add_folder_dialog=t},expression:"add_folder_dialog"}},[o("v-card",[o("v-toolbar",{attrs:{dark:"",color:"gray"}},[o("v-toolbar-title",[e._v("New Folder")]),o("v-spacer"),o("v-toolbar-items",[o("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){e.add_folder_dialog=!1}}},[o("v-icon",[e._v("close")])],1)],1)],1),o("v-card-text",[o("v-text-field",{attrs:{label:"New Folder Name",rules:[e.rules.required]},model:{value:e.new_folder_name,callback:function(t){e.new_folder_name=t},expression:"new_folder_name"}})],1),o("v-card-actions",[o("v-btn",{attrs:{color:"green",flat:"",dark:""},on:{click:e.createNewFolder}},[e._v("Create")]),o("v-spacer"),o("v-btn",{attrs:{color:"red",flat:"",dark:""},on:{click:function(t){e.add_folder_dialog=!1}}},[e._v("Cancel")])],1)],1)],1),o("v-dialog",{attrs:{width:"500px"},model:{value:e.delete_folder_dialog,callback:function(t){e.delete_folder_dialog=t},expression:"delete_folder_dialog"}},[o("v-card",[o("v-toolbar",{attrs:{dark:"",color:"gray"}},[o("v-toolbar-title",[e._v("Delete Folder?")]),o("v-spacer"),o("v-toolbar-items",[o("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){e.delete_folder_dialog=!1}}},[o("v-icon",[e._v("close")])],1)],1)],1),o("v-card-text",[e._v("\n                    Are you sure you want to permanently delete the folder and all the content inside?\n                ")]),o("v-card-actions",[o("v-btn",{attrs:{color:"blue",flat:"",dark:""},on:{click:e.deleteFolder}},[e._v("Yes, Delete It")]),o("v-spacer"),o("v-btn",{attrs:{color:"blue",flat:"",dark:""},on:{click:function(t){e.delete_folder_dialog=!1}}},[e._v("No")])],1)],1)],1),o("v-dialog",{attrs:{width:"500px"},model:{value:e.edit_name_dialog,callback:function(t){e.edit_name_dialog=t},expression:"edit_name_dialog"}},[o("v-card",[o("v-toolbar",{attrs:{dark:"",color:"gray"}},[o("v-toolbar-title",[e._v("Edit Name")]),o("v-spacer"),o("v-toolbar-items",[o("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){e.edit_name_dialog=!1}}},[o("v-icon",[e._v("close")])],1)],1)],1),o("v-card-text",[o("v-text-field",{attrs:{label:"New Name",rules:[e.rules.required]},model:{value:e.new_item_name,callback:function(t){e.new_item_name=t},expression:"new_item_name"}})],1),o("v-card-actions",[o("v-btn",{attrs:{color:"green",flat:"",dark:""},on:{click:e.renameItem}},[e._v("Rename")]),o("v-spacer"),o("v-btn",{attrs:{color:"red",flat:"",dark:""},on:{click:function(t){e.edit_name_dialog=!1}}},[e._v("Cancel")])],1)],1)],1)],1)},ve=[],he={data:function(){return{selected_folder:[],rename_dialog:!1,name_dialog:!1,save_name:"New Template",rules:{required:function(e){return!!e||"Required."}},hover_tree_id:-1,add_folder_dialog:!1,delete_folder_dialog:!1,edit_name_dialog:!1,selected_item:{},new_folder_name:"New Folder",new_item_name:"",description:"Short description of what the node does.",keywords:""}},methods:{closeDialog:function(){this.description="Short description of what the node does.",this.$store.commit("set_dialog_open",!1)},saveNode:function(){if(this.save_name){var e={overwrite:!1},t=!0;if(this.selected_folder[0].lib_id&&(t=confirm("Overwrite existing module?"),e.overwrite=!0),t){var o=this.$store.state.selected_node,a={};a.name=this.save_name,a.code=o.code,a.display_code=o.display_code,a.display_act_code=o.display_act_code;var i={description:this.description,keywords:this.keywords,test_vals:"",connections:""};a.meta=JSON.stringify(i);var n=this.selected_folder[0].path;e.path=n,e.node_data=a,this.$socket.emit("save_to_library",e),this.closeDialog()}}},openNewFolderDialog:function(e){this.selected_item=e,this.new_folder_name="New Folder",this.add_folder_dialog=!0},openDeleteFolderDialog:function(e){this.selected_item=e,this.delete_folder_dialog=!0},openEditNameDialog:function(e){this.selected_item=e,this.new_item_name=e.name,this.edit_name_dialog=!0},createNewFolder:function(){var e={path:this.selected_item.path,name:this.new_folder_name};this.$socket.emit("new_folder",e),this.add_folder_dialog=!1},deleteFolder:function(){var e=this.selected_item.path;this.$socket.emit("delete_folder",e),this.delete_folder_dialog=!1},renameItem:function(){var e={path:this.selected_item.path,name:this.new_item_name};this.$socket.emit("rename_folder",e),this.edit_name_dialog=!1}},computed:{save_dialog:{get:function(){return this.$store.state.save_dialog}},libraryTree:{get:function(){return this.$store.state.libraryTree}}}},fe=he,pe=o("a523"),me=o("0e8f"),ge=o("a722"),ye=o("a844"),be=Object(x["a"])(fe,ue,ve,!1,null,null,null),ke=be.exports;S()(be,{VBtn:D["a"],VCard:$["a"],VCardActions:E["a"],VCardText:E["b"],VContainer:pe["a"],VDialog:V["a"],VFlex:me["a"],VIcon:T["a"],VLayout:ge["a"],VSpacer:O["a"],VTextField:ce["a"],VTextarea:ye["a"],VToolbar:L["a"],VToolbarItems:N["a"],VToolbarTitle:N["b"],VTreeview:le["a"]});var we=o("bbd6"),xe=o.n(we),Ce={name:"App",components:{CodeEditor:P,SideBar:_e,LibrarySaveDialog:ke,RefactorFunctionalize:Y},data:function(){return{showMainCanvas:!0,toggle_exclusive:2,colors:[{code:"#F44336",color:"red"},{code:"#2196F3",color:"blue"},{code:"#4CAF50",color:"green"},{code:"#FFFFFF",color:"white"},{code:"#FFEB3B",color:"yellow"},{code:"#E91E63",color:"pink"}],stroke_size:"",showOptionsDialog:!1,library_search_val:null,librarySearchMenu:!1,library_sort:null,connected:!1}},mounted:function(){var e=this,t=document.getElementById("canvas"),o=document.getElementById("outlineContainer"),a=new m(t,o,this.$store);a.mount(),this.$store.commit("set_canvas",a),c.$on("update_displays",this.updateCanvas),this.library_sort=xe.a.new(),window.setInterval(function(){e.PushModel()},3e4);var i=this;window.addEventListener("keyup",function(e){"input"!=e.target.localName&&"textarea"!=e.target.localName&&("mxCellEditor mxPlainTextEditor"==e.target.className?13===e.keyCode&&e.target.blur():32==e.keyCode?i.captureSearchFocus():13===e.keyCode&&e.shiftKey&&i.runServer())}),this.$socket.emit("refresh_library"),this.connected=this.$socket.connected},methods:{changeCanvas:function(){var e=this.$store.state.canvas.GetModelXML(),t='<?xml version="1.0"?> <mxGraphModel><root><mxCell id="0"/><mxCell id="1" parent="0"/></root></mxGraphModel>';this.showMainCanvas?(this.$store.state.canvas_views["c1"]=e,this.$store.state.canvas_views["c2"]&&(t=this.$store.state.canvas_views["c2"])):(this.$store.state.canvas_views["c2"]=e,t=this.$store.state.canvas_views["c1"]),this.$store.state.canvas.LoadModel(t),this.$store.dispatch("attach_nodes"),this.$store.dispatch("update_all_cells"),this.$store.state.run_id+=1,this.showMainCanvas=!this.showMainCanvas},loseLibrarySearchFocus:function(){var e=this;this.$refs.search_bar.blur(),this.$nextTick(function(){e.library_search_val=!1,e.librarySearchMenu=!1})},runServer:function(){this.$store.dispatch("execute_server")},librarySearchSelection:function(e){var t=this;e&&e.hasOwnProperty("lib_id")&&(this.$socket.emit("load_node",e.lib_id),this.$nextTick(function(){t.library_search_val=null}))},nodeLibraryFilter:function(e,t,o){if(e){var a=this.library_sort.single(t,e.name);return!!a}return!0},captureSearchFocus:function(){this.$refs.search_bar.focus(),this.library_search_val=null,this.librarySearchMenu=!0},SetDashed:function(e){this.$store.dispatch("change_element_dashed",e)},SetStrokeSize:function(){this.$store.dispatch("change_element_stroke_size",this.stroke_size)},SetColor:function(e){this.$store.dispatch("change_element_color",e)},PushModel:function(){this.$store.dispatch("push_server_model")},OpenFile:function(){var e=document.getElementById("fileInput");e.click()},OpenModel:function(e){var t=this,o=e.target.files[0];if(o){var a=new FileReader;a.onload=function(e){var o=e.target.result;t.$socket.emit("load_model",o)},a.readAsText(o)}},resetServer:function(){var e=!1;e=confirm("Reset server? This will erase all unsaved data"),e&&this.$socket.emit("reset")},SaveModel:function(){var e=this.$store.state.canvas.GetModelXML(),t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e));var o=this.$store.state.document_name+".xml";t.setAttribute("download",o),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)},updateCanvas:function(){this.$store.dispatch("update_all_cells")}},computed:{document_name:{get:function(){return this.$store.state.document_name}},calc_list:{get:function(){return this.$store.state.calcs_list}},canvas_color:{get:function(){return this.$store.state.config.dark_mode?"grey darken-4":"white"}}},sockets:{connect:function(){this.connected=!0,this.$socket.emit("refresh_library")},disconnect:function(){this.connected=!1}}},Se=Ce,De=(o("034f"),o("7496")),$e=o("c6a6"),Ee=o("cc20"),Ve=o("549c"),Te=o("553a"),Oe=o("604c"),Me=o("c954"),Fe=o("e449"),Le=o("de8e"),Ne=Object(x["a"])(Se,i,n,!1,null,null,null),Ie=Ne.exports;S()(Ne,{VApp:De["a"],VAutocomplete:$e["a"],VBtn:D["a"],VCard:$["a"],VChip:Ee["a"],VContent:Ve["a"],VDivider:oe["a"],VFooter:Te["a"],VIcon:T["a"],VItemGroup:Oe["b"],VList:ae["a"],VListTile:ie["a"],VListTileAvatar:Me["a"],VListTileContent:re["a"],VListTileSubTitle:re["b"],VListTileTitle:re["c"],VMenu:Fe["a"],VOverflowBtn:Le["a"],VSpacer:O["a"],VToolbar:L["a"],VToolbarTitle:N["b"]});o("ac6a"),o("456d");var Pe=o("2f62"),Ae="node_id",Re="is_variable",Ue="param_name",ze="PyWeaverNodeDisplay",Be={DISPLAY_NODE_ID_ATTR:Ae,DISPLAY_VAR_ATTR:Re,DISPLAY_VAR_NAME_ATTR:Ue,DISPLAY_CLASS:ze},je=function(){function e(t,o,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(r["a"])(this,e),this.canvas=o,this.id=i||null,this.inputs={},this.outputs={},this.code_source="local",this.code="",this.display_code=t,this.display_act_code="",this.cell_id="",this.cell={},this.compiled_display_code="",this.compileDisplayCode(),this.store=a,this.x=20,this.y=20,this.width=100,this.height=null}return Object(s["a"])(e,[{key:"setCell",value:function(e){this.cell=e,this.id=e.id}},{key:"compileDisplayCode",value:function(){this.compiled_display_code="<div "+Be.DISPLAY_NODE_ID_ATTR+"='"+this.cell.id+"' class='"+Be.DISPLAY_CLASS+"'id='node_"+this.cell.id+"'>"+this.display_code+"</div>"}},{key:"setCode",value:function(e){this.code=e,this.cell.code=e}},{key:"setDisplayCode",value:function(e){this.display_code=e,this.compileDisplayCode(),this.cell.display_code=e}},{key:"setDisplayActCode",value:function(e){this.display_act_code=e,this.cell.display_act_code=e}}]),e}(),Ye=o("8055"),He=o.n(Ye),Ge=He()("http://localhost:5000"),Ke=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{key:e.run_id},[o("v-runtime-template",{attrs:{template:e.template,display_code:e.display_code}})],1)},Je=[],qe=o("03f1"),We=o("faa6"),Xe=o("fcc5"),Qe=o("d53e"),Ze={props:["_node","store"],data:function(){return{id:"",template:"<div>Node</div>",display_code:"{}",scope:{},node:{},_previous_template:"",_previous_display_code:"{}",isBigDisplay:!1}},components:{VRuntimeTemplate:qe["a"],BigDisplay:Xe["a"],SmallDisplay:Qe["a"]},directives:{Val:We["a"]},methods:{changeCode:function(e){this.template="<div>"+e+"</div>"},changeAct:function(e){this.display_code=e},updateDisplay:function(){this.$forceUpdate(),this.onResults&&this.onResults()}},computed:{run_id:function(){return this.store.state.run_id}},mounted:function(){this.node=new Proxy(this._node,{get:function(e,t,o){var a=null;if("__ob__"!=t){var i=null,n=null;if(t in e.inputs){var r=e.inputs[t];r&&(i=r.id,n=r.var_name)}else i=e.id,n=t;i&&n&&i in e.store.state.results&&n in e.store.state.results[i]&&(a=e.store.state.results[i][n])}return a}})}},et=Ze,tt=Object(x["a"])(et,Ke,Je,!1,null,null,null),ot=tt.exports;a["a"].use(Pe["a"]);var at=new Pe["a"].Store({state:{canvas:{},selected_node:{},open_code_editor:!1,code:"",display_code:"",display_act_code:"",code_nodes:{},document_name:"Untitled",node_displays:{},results:{},config:{auto_exec:!0,sync_model:!0,dark_mode:!1},run_id:0,libraryTree:[],save_dialog:!1,session_id:null,code_error_dict:{},code_parse_error_list:[],calcs_list:[],show_refactor_func_dialog:!1,refactor_func_options:[],refactor_node_id:"",canvas_views:{}},mutations:{set_refactor_node_id:function(e,t){e.refactor_node_id=t},set_refactor_func_options:function(e,t){e.refactor_func_options=t},calc_list_change:function(e,t){e.calcs_list=t},add_code_error:function(e,t){e.code_error_dict[t.id]={line:t.line,type:t.error_tyoe,error:t.error}},clear_code_error_list:function(e){e.code_error_dict={}},set_dark_mode:function(e,t){e.config.dark_mode=t},set_auto_exec:function(e,t){e.config.auto_exec=t},set_sync_model:function(e,t){e.config.sync_model=t},tree_change:function(e,t){e.libraryTree=t},set_selected_node:function(e,t){e.selected_node=t},open_editor:function(e,t){e.open_code_editor=t},set_dialog_open:function(e,t){e.save_dialog=t},set_canvas:function(e,t){e.canvas=t},set_code:function(e,t){e.code=t},set_display_code:function(e,t){e.display_code=t},set_show_refactor_func_dialog:function(e,t){e.show_refactor_func_dialog=t},set_display_act_code:function(e,t){e.display_act_code=t},set_document_name:function(e,t){e.document_name=t},set_session_id:function(e,t){e.session_id=t}},actions:{update_all_cells:function(e){var t=e.state.canvas.graph;for(var o in e.state.code_nodes){var a=e.state.code_nodes[o].cell;t.updateCellSize(a,!0)}},push_server_model:function(e){e.state.config.sync_model&&e.dispatch("sync_model_with_server")},sync_model_with_server:function(e){var t={};t.session_id=e.state.session_id,t.xml=e.state.canvas.GetModelXML(),Ge.emit("sync_model",t)},open_code_editor:function(e,t){e.commit("set_selected_node",t),e.commit("set_code",t.code),e.commit("set_display_code",t.display_code),e.commit("set_display_act_code",t.display_act_code),e.commit("open_editor",!0)},attach_nodes:function(e){for(var t in e.state.node_displays){var o=e.state.node_displays[t],a=document.getElementById("node_"+t);a&&a.appendChild(o.$el)}},socket_addNode:function(e,t){var o=e.state.canvas,i=t["id"],n=new je("Node",e.state.canvas,e,i);n.inputs=t["input_port_names"],n.outputs=t["out_port_names"],t["x"]&&t["y"]&&t["width"]&&t["height"]&&(n.x=t["x"],n.y=t["y"],n.width=t["width"],n.height=t["height"]);var r=o.addNode(n),s=r.id;console.log("new id: "+s);var c=a["a"].extend(ot),l=new c({propsData:{_node:n,store:e}});n.setCell(r),n.setCode(t.code),l.changeCode(t.display_code),n.setDisplayCode(t.display_code),l.changeAct(t.display_act_code),n.setDisplayActCode(t.display_act_code),l.$mount(),document.getElementById("node_"+s).appendChild(l.$el),e.state.node_displays[r.id]=l,e.state.code_nodes[r.id]=n,a["a"].nextTick().then(function(){o.updateCellSize(r)})},socket_syncSession:function(e,t){e.state.session_id!=t&&(e.commit("set_session_id",t),Ge.emit("request_model"))},socket_setNodeClientCode:function(e,t){var o=t["node_id"],a=t["code"];e.state.code_nodes[o].code=a},socket_setNodeClientUi:function(e,t){},socket_setNodeClientUiScript:function(e,t){},socket_forceSessionId:function(e,t){e.commit("set_session_id",t)},socket_addError:function(e,t){e.commit("add_code_error",t)},socket_addConnection:function(e,t){e.state.canvas.addEdge(t),e.state.code_nodes[t.target_id].inputs[t.target_var]={id:t.source_id,var_name:t.source_var}},socket_setLibraryTree:function(e,t){e.commit("tree_change",t.tree),e.commit("calc_list_change",t.calcs)},socket_changeNodeInputPorts:function(e,t){var o=e.state.canvas,a=e.state.selected_node.cell.id,i=e.state.code_nodes[a].cell;for(var n in e.state.code_nodes[a].inputs={},t)e.state.code_nodes[a].inputs[t[n]]=null;o.changePorts(i,t,0,"input")},socket_changeNodeOutputPorts:function(e,t){var o=e.state.canvas,a=e.state.selected_node.cell.id,i=e.state.code_nodes[a].cell;for(var n in e.state.code_nodes[a].outputs={},t)e.state.code_nodes[a].outputs[t[n]]=null;o.changePorts(i,t,1,"output")},save_node_code:function(e,t){e.state.selected_node.setCode(t.code);var o=e.state.selected_node.id;e.state.node_displays[o].changeCode(t.display_code),e.state.selected_node.setDisplayCode(t.display_code),e.state.node_displays[o].changeAct(t.display_act_code),e.state.selected_node.setDisplayActCode(t.display_act_code),e.state.node_displays[o].updateDisplay(),c.$emit("update_displays"),a["a"].nextTick().then(function(){var o={};o.code=t.code,o.ui_code=t.display_code,o.ui_script=t.display_act_code,o.id=e.state.selected_node.cell.id,Ge.emit("edit_node_code",o),e.dispatch("auto_execute")})},add_connection:function(e,t){Ge.emit("make_connection",t),e.state.code_nodes[t.target_id].inputs[t.target_var]={id:t.source_id,var_name:t.source_var},e.dispatch("auto_execute")},remove_connection:function(e,t){Ge.emit("delete_connection",t),e.dispatch("auto_execute")},rename_connection:function(e,t){Ge.emit("rename_connection",t),e.dispatch("auto_execute")},set_output_type:function(e,t){Ge.emit("set_output_type",t)},open_refactor_dialog:function(e,t){e.commit("set_refactor_node_id",t);var o=Object.keys(e.state.code_nodes[t].inputs);e.commit("set_refactor_func_options",o),e.commit("set_show_refactor_func_dialog",!0)},refactor_to_function:function(e,t){var o={},a=t["node_id"];o["id"]=a,o["code"]=e.state.code_nodes[a].code,o["ui_code"]=e.state.code_nodes[a].display_code,o["ui_script"]=e.state.code_nodes[a].display_act_code,o["inner_vars"]=t["inner_vars"],Ge.emit("refactor_to_function",o)},execute_server:function(e){e.commit("clear_code_error_list");var t={},o=e.state.node_displays;for(var a in o)t[a]=o[a].scope;Ge.emit("execute",t,function(t){e.state.results=t,e.state.run_id+=1,e.state.canvas.addResults(t);var o={};for(var a in e.state.node_displays){var i=e.state.node_displays[a];o[a]=i.scope}e.state.canvas.addScopes(o),c.$emit("update_displays"),e.dispatch("update_all_cells")})},socket_setResults:function(e,t){t=JSON.parse(t),e.state.results=t,e.state.run_id+=1,e.state.canvas.addResults(t),c.$emit("update_displays")},socket_setScopes:function(e,t){for(var o in t=JSON.parse(t),e.state.node_displays){var a=e.state.node_displays[o];for(var i in a.scope)"__ob__"!=i&&"__proto__"!=i&&(a.scope[i]=t[o][i])}e.state.run_id+=1,e.state.canvas.addScopes(t),c.$emit("update_displays")},auto_execute:function(e){e.state.config.auto_exec&&e.dispatch("execute_server")},delete_node:function(e,t){Ge.emit("delete_node",t),e.state.node_displays[t].$destroy(),delete e.state.node_displays[t],delete e.state.code_nodes[t]},change_element_color:function(e,t){e.state.canvas.setCellColor(t)},change_element_stroke_size:function(e,t){e.state.canvas.setCellStroke(t)},change_element_dashed:function(e,t){e.state.canvas.setSelectionDashed(t)},change_dark_mode:function(e,t){e.commit("set_dark_mode",t),e.state.canvas.updateSyles()},save_config_file:function(e){Ge.emit("save_config_file",JSON.stringify(e.state.config))},socket_setNodeOverlay:function(e,t){var o=t["node_id"],a=t["overlay_type"],i=e.state.code_nodes[o].cell;e.state.canvas.removeOverlay(i),e.state.canvas.setOverlay(i,a)}}}),it=o("f87c"),nt=o("85fe"),rt=o("2ed2"),st=o("d0a2"),ct=(o("d5e8"),o("d1e7"),o("bc3a")),lt=o.n(ct);a["a"].use(Be),a["a"].component("plot",rt["a"]),a["a"].component("grid",st["a"]),a["a"].directive("observe-visibility",nt["a"]),a["a"].config.productionTip=!1;var dt=lt.a.create({timeout:5e3,baseURL:"http://localhost:5000/"});dt.get("/config",{withCredentials:!1}).then(function(e){at.state.config=e.data}).catch(function(e){console.log(e)}).then(function(){a["a"].use(it["a"],Ge,{store:at}),new a["a"]({store:at,render:function(e){return e(Ie)}}).$mount("#app")})},"7e8b":function(e,t,o){e.exports=o.p+"img/hourglass.14df74c7.png"},b68c:function(e,t,o){"use strict";var a=o("fe02"),i=o.n(a);i.a},bb5a:function(e,t,o){e.exports=o.p+"img/error.3aacd2be.png"},fe02:function(e,t,o){}});
//# sourceMappingURL=index.2ac3d002.js.map